{"version":3,"sources":["../src/index.js"],"names":["app","PORT","process","env","global","db","use","bodyParser","urlencoded","extended","json","v1Routes","webRoutes","engine","set","__dirname","express","static","req","res","next","err","Error","status","errors","message","listen","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAMA,GAAG,GAAG,uBAAZ;AACA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AAGAG,MAAM,CAACC,EAAP,GAAYA,WAAZ;AAEAL,GAAG,CAACM,GAAJ,CAAQ,oBAAR;AACAN,GAAG,CAACM,GAAJ,CAAQC,oBAAWC,UAAX,CAAsB;AAACC,EAAAA,QAAQ,EAAE;AAAX,CAAtB,CAAR;AACAT,GAAG,CAACM,GAAJ,CAAQC,oBAAWG,IAAX,EAAR;AACAV,GAAG,CAACM,GAAJ,CAAQK,gBAAR;AACAX,GAAG,CAACM,GAAJ,CAAQM,iBAAR;AAEAZ,GAAG,CAACa,MAAJ,CAAW,MAAX,EAAmB,+BAAnB;AACAb,GAAG,CAACc,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AACAd,GAAG,CAACc,GAAJ,CAAQ,OAAR,EAAiBC,SAAS,GAAG,WAA7B;AACAf,GAAG,CAACM,GAAJ,CAAQU,iBAAQC,MAAR,CAAe,SAAf,CAAR,E,CAGA;;AACAjB,GAAG,CAACM,GAAJ,CAAQ,CAACY,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxB,MAAMC,GAAG,GAAG,IAAIC,KAAJ,CAAU,WAAV,CAAZ;AACAD,EAAAA,GAAG,CAACE,MAAJ,GAAa,GAAb;AACAH,EAAAA,IAAI,CAACC,GAAD,CAAJ;AACH,CAJD;AAMArB,GAAG,CAACM,GAAJ,CAAQ,CAACe,GAAD,EAAMH,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAC7BD,EAAAA,GAAG,CAACI,MAAJ,CAAWF,GAAG,CAACE,MAAJ,IAAc,GAAzB,EAA8Bb,IAA9B,CAAmC;AAC/Bc,IAAAA,MAAM,EAAE;AACJC,MAAAA,OAAO,EAAEJ,GAAG,CAACI;AADT;AADuB,GAAnC;AAKH,CAND;AAQAzB,GAAG,CAAC0B,MAAJ,CAAWzB,IAAX,EAAiB,MAAM0B,OAAO,CAACC,GAAR,iCAAqC3B,IAArC,EAAvB;eAEeD,G","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport { v1Routes, webRoutes } from './routes';\nimport mustacheExpress from 'mustache-express';\nimport db from './db';\n\nconst app = express();\nconst PORT = process.env.PORT || 3005;\n\n\nglobal.db = db;\n\napp.use(cors());\napp.use(bodyParser.urlencoded({extended: false}));\napp.use(bodyParser.json());\napp.use(v1Routes);\napp.use(webRoutes);\n\napp.engine('html', mustacheExpress())\napp.set('view engine', 'html');\napp.set('views', __dirname + '/../views');\napp.use(express.static('/public'));\n\n\n//404 error handler\napp.use((req, res, next) => {\n    const err = new Error('Not found');\n    err.status = 404;\n    next(err);\n})\n\napp.use((err, req, res, next) => {\n    res.status(err.status || 500).json({\n        errors: {\n            message: err.message\n        }\n    })\n})\n\napp.listen(PORT, () => console.log(`App listening on port ${PORT}`))\n\nexport default app;"],"file":"index.js"}